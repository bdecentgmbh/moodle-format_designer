define ("format_designer/designer_section",["jquery","core/ajax","core/loadingicon","core_courseformat/courseeditor","core_course/actions"],function(a,b,c,d,e){var f=function(b,c){var e=this;e.courseeditor=d.getCurrentCourseEditor();e.courseId=b;e.contextId=c;a("body").delegate(e.SectionController,"click",e.sectionLayoutaction.bind(this));a("body").delegate(e.sectionRestricted,"click",this.sectionRestrictHandler.bind(this));a("body").delegate(e.moduleBlock,"click",e.moduleHandler.bind(this));a("body").delegate(e.fullDescription,"click",e.fullmodcontentHandler.bind(this));a("body").delegate(e.trimDescription,"click",e.trimmodcontentHandler.bind(this))};f.prototype.SectionController=".designer #section-designer-action .dropdown-menu a";f.prototype.SectionLayoutController=".designer #section-designer-action .dropdown-menu a";f.prototype.RestrictInfo=".designer #designer-section-content .call-action-block";f.prototype.loadingElement=".icon-loader-block";f.prototype.sectionRestricted=".designer .restricted-section-block .section-restricted-action";f.prototype.activityli="li.activity";f.prototype.ulclasses={cards:"card-deck card-layout",list:"list-layout",default:""};f.prototype.moduleBlock=".designer #designer-section-content li.activity";f.prototype.moduleDescription=".designer #designer-section-content li .mod-description-action";f.prototype.fullDescription="#designer-section-content li .fullcontent-summary .mod-description-action";f.prototype.trimDescription="#designer-section-content li .trim-summary .mod-description-action";f.prototype.sectionRestrictHandler=function(b){var c=a(b.currentTarget).parent();if(c){if(!c.hasClass("show")){c.addClass("show")}else{c.removeClass("show")}}};f.prototype.sectionLayoutaction=function(d){var f=this,g=d.target.closest("li.section").getAttribute("id"),h=d.target.closest("li.section").getAttribute("data-id"),i=a(d.currentTarget).data("value"),j=a(d.currentTarget).text();a(d.target).parents(".dropdown").find(".btn").html(j);a(d.target).parents(".dropdown").find(".btn").val(i);a(d.target).parent().find("a.dropdown-item").each(function(){a(this).removeClass("active")});a(d.target).addClass("active");var k=a("#"+g).find("ul#designer-section-content li").length;if(k){var l="#"+g+" "+f.loadingElement,m={courseid:f.courseId,sectionid:h,options:[{name:a(d.currentTarget).data("option"),value:i}]},n=b.call([{methodname:"format_designer_set_section_options",args:m}],!0);a.when.apply(a,n).done(function(){var a=e.refreshSection("#"+g,h,0);a.then(function(){return""}).catch()});c.addIconToContainerRemoveOnCompletion(l,n)}};f.prototype.moduleHandler=function(b){if(a(b.target).hasClass("fa-lock")){b.preventDefault();var c=a(b.currentTarget).find(".restrict-block");if(c){if(!c.hasClass("show")){c.addClass("show")}else{c.removeClass("show")}}}};f.prototype.fullmodcontentHandler=function(b){var c=a(b.currentTarget),d=a(c).closest("li.activity").find(".fullcontent-summary"),e=a(c).closest("li.activity").find(".trim-summary");if(e.hasClass("summary-hide")){e.removeClass("summary-hide");d.addClass("summary-hide")}};f.prototype.trimmodcontentHandler=function(b){var c=a(b.currentTarget),d=a(c).closest("li.activity").find(".fullcontent-summary"),e=a(c).closest("li.activity").find(".trim-summary");if(d.hasClass("summary-hide")){d.removeClass("summary-hide");e.addClass("summary-hide")}};return{init:function init(a,b){return new f(a,b)}}});
//# sourceMappingURL=designer_section.min.js.map
