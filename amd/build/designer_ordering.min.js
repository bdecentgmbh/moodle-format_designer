define ("format_designer/designer_ordering",["jquery","core_course/actions","core/ajax"],function(a,b,c){var i={EDITINPROGRESS:"editinprogress",EDITINGMOVE:"editing_move"},j={ACTIVITYLI:"li.activity",ACTIONAREA:".actions",SECTIONLI:"li.section"};function d(b){setTimeout(function(){a("<div>"+b+"</div>").find(j.ACTIVITYLI).each(function(){var c=a(this).attr("id");a(j.ACTIVITYLI+"#"+c).replaceWith(b);g(c);a(j.ACTIVITYLI+"#"+c).css("opacity",1)})},1e3)}function e(a){var b;Y.use("moodle-course-util",function(c){b=c.Moodle.core_course.util.cm.getId(c.Node(a.get(0)))});return b}function f(a,b,c){window.setTimeout(function(){a.removeClass(i.EDITINPROGRESS);if(b){b.hide()}},c)}function g(a){Y.use("moodle-course-coursebase",function(){M.course.coursebase.invoke_function("setup_for_resource","#"+a)});if(M.core.actionmenu&&M.core.actionmenu.newDOMNode){M.core.actionmenu.newDOMNode(Y.one("#"+a))}}function h(a){a.addClass(i.EDITINPROGRESS);var b=a.find(j.ACTIONAREA).get(0);if(b){var c=M.util.add_spinner(Y,Y.Node(b));c.show();return c}return null}return{init:function(){Y.use("moodle-course-coursebase",function(){M.course.coursebase.register_module({set_visibility_resource_ui:function set_visibility_resource_ui(b){var g=a(b.element.getDOMNode()),k=e(g);if(k){g.css("opacity",0);var l=g.find("."+i.EDITINGMOVE).attr("data-sectionreturn"),m=g.closest(j.SECTIONLI).attr("data-id"),n=h(g),o=c.call([{methodname:"format_designer_get_module",args:{id:k,sectionid:m,sectionreturn:l}}],!0);a.when.apply(a,o).done(function(a){f(g,n,400);d(a)}).fail(function(){f(g,n)})}}})})}}});
//# sourceMappingURL=designer_ordering.min.js.map
