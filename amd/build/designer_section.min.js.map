{"version":3,"file":"designer_section.min.js","sources":["../src/designer_section.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Implemented designer format js.\n *\n * @module     format_designer/designer_section\n * @copyright  2021 bdecent gmbh <https://bdecent.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n define(['jquery', 'core/fragment', 'core/templates', 'core/loadingicon', 'core/ajax'],\n function($, Fragment, Templates, Loadingicon, Ajax) {\n\n    var SELECTOR = {\n        ACTIVITYLI: 'li.activity',\n        SECTIONLI: 'li.section',\n        ACTIVITYACTION: 'a.cm-edit-action',\n        SECTIONACTIONMENU: '.section_action_menu.designer-menu',\n    };\n\n    Y.use('moodle-course-coursebase', function() {\n        var courseformatselector = M.course.format.get_section_selector();\n        if (courseformatselector) {\n            SELECTOR.SECTIONLI = courseformatselector;\n        }\n    });\n\n\n    /**\n     * Control designer format action\n     * @param {int} courseId\n     * @param {int} contextId\n     */\n    let DesignerSection = function(courseId, contextId) {\n        var self = this;\n        self.courseId = courseId;\n        self.contextId = contextId;\n\n        $('body').delegate(self.SectionController, 'click', self.sectionLayoutaction.bind(this));\n        $(\"body\").delegate(self.RestrictInfo, \"click\", self.moduleHandler.bind(this));\n        $(\"body\").delegate(self.sectionRestricted, \"click\", this.sectionRestrictHandler.bind(this));\n        $('body').delegate(self.fullDescription, \"click\", self.fullmodcontentHandler.bind(this));\n        $('body').delegate(self.trimDescription, \"click\", self.trimmodcontentHandler.bind(this));\n        $('body').on('click keypress', SELECTOR.ACTIVITYLI + ' ' +\n        SELECTOR.ACTIVITYACTION + '[data-action]', this.editModuleRenderer.bind(this));\n        $('body').delegate(self.goToURL, \"click\", self.redirectToModule.bind(this));\n        window.onhashchange = function() {\n            self.expandSection();\n        };\n        this.expandSection();\n    };\n\n    /**\n     * Selector section controller.\n     */\n    DesignerSection.prototype.goToURL = '.designer [data-action=\"go-to-url\"]';\n\n    DesignerSection.prototype.SectionController = \".designer #section-designer-action .dropdown-menu a\";\n\n    DesignerSection.prototype.RestrictInfo = \".designer .designer-section-content .call-action-block\";\n\n    DesignerSection.prototype.moduleBlock = \".designer .designer-section-content li.activity\";\n\n    DesignerSection.prototype.loadingElement = \".icon-loader-block\";\n\n    DesignerSection.prototype.sectionRestricted = \".designer .availability-section-block .section-restricted-action\";\n\n    DesignerSection.prototype.moduleDescription = \".designer .designer-section-content li .mod-description-action\";\n\n    DesignerSection.prototype.fullDescription = \".designer-section-content li .fullcontent-summary .mod-description-action\";\n\n    DesignerSection.prototype.trimDescription = \".designer-section-content li .trim-summary .mod-description-action\";\n\n    DesignerSection.prototype.addSectionSpinner = function(sectioninfo) {\n        var sectionelement = $(sectioninfo).addClass('editinprogress');\n        var actionarea = sectionelement.find('li.section').get(0);\n        if (actionarea) {\n            var spinner = M.util.add_spinner(Y, Y.Node(actionarea));\n            spinner.show();\n            return spinner;\n        }\n        return null;\n    };\n\n    DesignerSection.prototype.redirectToModule = function(event) {\n        let nodeName = event.target.nodeName;\n        let preventionNodes = ['a', 'button', 'form'];\n        let iscircle = event.target.closest('li.activity').classList.contains('circle-layout');\n        let isDescription = event.target.classList.contains('mod-description-action');\n        let isPadlock = event.target.classList.contains('fa-lock');\n        if ((nodeName in preventionNodes)\n            || document.body.classList.contains('editing') || iscircle || isDescription || isPadlock) {\n            return null;\n        }\n        var card = event.target.closest(\"[data-action=go-to-url]\");\n        let modurl = card.getAttribute('data-url');\n        window.location.href = modurl;\n    };\n\n    DesignerSection.prototype.expandSection = () => {\n        // Alert();\n        var sectionID = window.location.hash;\n        if (sectionID) {\n            var id = sectionID.substring(1);\n            var section = document.getElementById(id);\n            if (section) {\n                var title = section.querySelector('.section-header-content');\n                if (title) {\n                    title.classList.remove('collapsed');\n                    title.setAttribute('aria-expanded', true);\n                }\n                var content = section.querySelector('.content');\n                if (content) {\n                    content.classList.add('show');\n                }\n                if (document.getElementById('section-course-accordion') !== null) {\n                    document.getElementById('section-head-0').classList.add('collapsed');\n                    document.getElementById('section-content-0').classList.remove('show');\n                }\n                section.scrollIntoView();\n            }\n        }\n    };\n\n    DesignerSection.prototype.removeSectionSpinner = function(sectioninfo, spinner, delay) {\n        var element = $(sectioninfo);\n        window.setTimeout(function() {\n            element.removeClass('editinprogress');\n            if (spinner) {\n                spinner.hide();\n            }\n        }, delay);\n    };\n\n    /**\n     * Wrapper for Y.Moodle.core_course.util.cm.getId\n     *\n     * @param {JQuery} element\n     * @returns {Integer}\n     */\n     DesignerSection.prototype.getModuleId = function(element) {\n        var id;\n        Y.use('moodle-course-util', function(Y) {\n            id = Y.Moodle.core_course.util.cm.getId(Y.Node(element.get(0)));\n        });\n        return id;\n    };\n\n    DesignerSection.prototype.refreshSectionInfo = function(target) {\n        var self = this;\n        let sectioninfo = target.currentTarget.closest(\"li.section\");\n        let sectionId = $(sectioninfo).attr('data-id');\n        let sectionReturn = $(sectioninfo).attr('data-sectionreturnid');\n        var spinner = self.addSectionSpinner(sectioninfo);\n        var args = {\n            courseid: self.courseId,\n            sectionid: sectionId,\n            sectionreturn: sectionReturn\n        };\n        window.setTimeout(function(args) {\n            var promises = Ajax.call([{\n                methodname: 'format_designer_section_refresh',\n                args: args\n            }], true);\n            $.when.apply($, promises)\n                .done(function(dataencoded) {\n                    var data = $.parseJSON(dataencoded);\n                    if (data.modules !== undefined) {\n                        for (var i in data.modules) {\n                            self.replaceActivityhtml(data.modules[i]);\n                        }\n                    }\n                });\n\n        }, 1000, args);\n        self.removeSectionSpinner(sectioninfo, spinner, 400);\n    };\n\n    DesignerSection.prototype.editModuleRenderer = function(event) {\n        var self = this;\n        if (event.type === 'keypress' && event.keyCode !== 13) {\n            return;\n        }\n        var actionItem = $(event.currentTarget),\n        moduleElement = actionItem.closest(SELECTOR.ACTIVITYLI),\n        action = actionItem.attr('data-action'),\n        moduleId = self.getModuleId(moduleElement);\n        switch (action) {\n            case 'moveleft':\n            case 'moveright':\n            case 'delete':\n            case 'duplicate':\n            case 'hide':\n            case 'stealth':\n            case 'show':\n            case 'groupsseparate':\n            case 'groupsvisible':\n            case 'groupsnone':\n                break;\n            default:\n                // Nothing to do here!\n                return;\n        }\n        if (!moduleId) {\n            return;\n        }\n        event.preventDefault();\n        if (action === 'delete') {\n            // Deleting requires confirmation.\n            window.setTimeout(function() {\n                $('.modal-footer button[data-action=\"save\"]').click(function() {\n                    self.refreshSectionInfo(event);\n                });\n            }, 500);\n        } else {\n            self.refreshSectionInfo(event);\n        }\n    };\n\n    DesignerSection.prototype.fullmodcontentHandler = function(event) {\n        var THIS = $(event.currentTarget);\n        let fullContent = $(THIS).closest('li.activity').find('.fullcontent-summary');\n        let trimcontent = $(THIS).closest('li.activity').find('.trim-summary');\n        if (trimcontent.hasClass('summary-hide')) {\n            trimcontent.removeClass('summary-hide');\n            fullContent.addClass('summary-hide');\n        }\n    };\n\n    DesignerSection.prototype.trimmodcontentHandler = function(event) {\n        var THIS = $(event.currentTarget);\n        let fullContent = $(THIS).closest('li.activity').find('.fullcontent-summary');\n        let trimcontent = $(THIS).closest('li.activity').find('.trim-summary');\n        if (fullContent.hasClass('summary-hide')) {\n            fullContent.removeClass('summary-hide');\n            trimcontent.addClass('summary-hide');\n        }\n    };\n\n    DesignerSection.prototype.sectionRestrictHandler = function(event) {\n        var sectionRestrictInfo = $(event.currentTarget).prev();\n        if (sectionRestrictInfo) {\n            if (!sectionRestrictInfo.hasClass('show')) {\n                sectionRestrictInfo.addClass('show');\n            } else {\n                sectionRestrictInfo.removeClass('show');\n            }\n        }\n    };\n\n    DesignerSection.prototype.moduleHandler = function(event) {\n        event.preventDefault();\n        var restrictBlock = $(event.currentTarget).parents('.restrict-block');\n        if (restrictBlock.length) {\n            if (!restrictBlock.hasClass('show')) {\n                restrictBlock.addClass('show');\n            } else {\n                restrictBlock.removeClass('show');\n            }\n        }\n    };\n\n    /**\n     * Implementaion swith the section layout.\n     * @param {object} event\n     */\n    DesignerSection.prototype.sectionLayoutaction = function(event) {\n        var self = this;\n        let sectionId = event.target.closest('li.section').getAttribute('id');\n        var iconBlock = \"#\" + sectionId + \" \" + self.loadingElement;\n        var layout = $(event.currentTarget).data('value');\n        var layouttext = $(event.currentTarget).text();\n        $(event.target).parents(\".dropdown\").find(\".btn\").html(layouttext);\n        $(event.target).parents(\".dropdown\").find(\".btn\").val(layout);\n        $(event.target).parent().find(\"a.dropdown-item\").each(function() {\n            $(this).removeClass('active');\n        });\n        $(event.target).addClass('active');\n        let dataid = event.target.closest('li.section').getAttribute('data-id');\n        var args = {\n            courseid: self.courseId,\n            sectionid: dataid,\n            options: [{name: $(event.currentTarget).data('option'), value: layout}]\n        };\n        var ULClasses = {\n            'cards': 'card-deck card-layout',\n            'list': 'list-layout',\n            'default': 'link-layout',\n            'circles': 'circles-layout'\n        };\n        var promises = Ajax.call([{\n                methodname: 'format_designer_set_section_options',\n                args: args\n            }], true);\n        $.when.apply($, promises)\n            .done(function(dataencoded) {\n                var data = $.parseJSON(dataencoded);\n                if (data.modules !== undefined) {\n                    for (var i in data.modules) {\n                        self.replaceActivityhtml(data.modules[i]);\n                    }\n                    document.getElementById(sectionId).classList.forEach((className) => {\n                        if (className.startsWith('section-type-')) {\n                            document.getElementById(sectionId).classList.remove(className);\n                        }\n                    });\n                    document.getElementById(sectionId).classList.add('section-type-' + layout);\n                    $('#' + sectionId).find('ul.section').removeClass(ULClasses.cards);\n                    $('#' + sectionId).find('ul.section').removeClass(ULClasses.list);\n                    $('#' + sectionId).find('ul.section').removeClass(ULClasses.default);\n                    $('#' + sectionId).find('ul.section').removeClass(ULClasses.circles);\n                    $('#' + sectionId).find('ul.section').addClass(ULClasses[layout]);\n                }\n            });\n        Loadingicon.addIconToContainerRemoveOnCompletion(iconBlock, promises);\n    };\n\n    /**\n     * Replaces the course module with the new html (used to update module after it was edited or its visibility was changed).\n     *\n     * @param {String} activityHTML\n     */\n    DesignerSection.prototype.replaceActivityhtml = function(activityHTML) {\n        $('<div>' + activityHTML + '</div>').find(SELECTOR.ACTIVITYLI).each(function() {\n            // Extract id from the new activity html.\n            var id = $(this).attr('id');\n            // Find the existing element with the same id and replace its contents with new html.\n            $(SELECTOR.ACTIVITYLI + '#' + id).replaceWith(activityHTML);\n            // Initialise action menu.\n            initActionMenu(id);\n        });\n    };\n\n    /**\n     * Initialise action menu for the element (section or module)\n     *\n     * @param {String} elementid CSS id attribute of the element\n     */\n    var initActionMenu = function(elementid) {\n        // Initialise action menu in the new activity.\n        Y.use('moodle-course-coursebase', function() {\n            M.course.coursebase.invoke_function('setup_for_resource', '#' + elementid);\n        });\n        if (M.core.actionmenu && M.core.actionmenu.newDOMNode) {\n            M.core.actionmenu.newDOMNode(Y.one('#' + elementid));\n        }\n    };\n\n    return {\n        init: function(courseId, contextId) {\n            return new DesignerSection(courseId, contextId);\n        }\n    };\n});"],"names":["define","$","Fragment","Templates","Loadingicon","Ajax","SELECTOR","ACTIVITYLI","SECTIONLI","ACTIVITYACTION","SECTIONACTIONMENU","Y","use","courseformatselector","M","course","format","get_section_selector","DesignerSection","courseId","contextId","self","this","delegate","SectionController","sectionLayoutaction","bind","RestrictInfo","moduleHandler","sectionRestricted","sectionRestrictHandler","fullDescription","fullmodcontentHandler","trimDescription","trimmodcontentHandler","on","editModuleRenderer","goToURL","redirectToModule","window","onhashchange","expandSection","prototype","moduleBlock","loadingElement","moduleDescription","addSectionSpinner","sectioninfo","actionarea","addClass","find","get","spinner","util","add_spinner","Node","show","event","nodeName","target","iscircle","closest","classList","contains","isDescription","isPadlock","document","body","modurl","getAttribute","location","href","sectionID","hash","id","substring","section","getElementById","title","querySelector","remove","setAttribute","content","add","scrollIntoView","removeSectionSpinner","delay","element","setTimeout","removeClass","hide","getModuleId","Moodle","core_course","cm","getId","refreshSectionInfo","currentTarget","sectionId","attr","sectionReturn","args","courseid","sectionid","sectionreturn","promises","call","methodname","when","apply","done","dataencoded","data","parseJSON","undefined","modules","i","replaceActivityhtml","type","keyCode","actionItem","moduleElement","action","moduleId","preventDefault","click","THIS","fullContent","trimcontent","hasClass","sectionRestrictInfo","prev","restrictBlock","parents","length","iconBlock","layout","layouttext","text","html","val","parent","each","dataid","options","name","value","ULClasses","forEach","className","startsWith","cards","list","default","circles","addIconToContainerRemoveOnCompletion","activityHTML","replaceWith","initActionMenu","elementid","coursebase","invoke_function","core","actionmenu","newDOMNode","one","init"],"mappings":"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"}