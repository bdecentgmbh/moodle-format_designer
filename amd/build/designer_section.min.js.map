{"version":3,"file":"designer_section.min.js","sources":["../src/designer_section.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n\r\n/**\r\n * Implemented designer format js.\r\n *\r\n * @module     format_designer/designer_section\r\n * @copyright  2021 bdecent gmbh <https://bdecent.de>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n define(['jquery', 'core/fragment', 'core/templates', 'core/loadingicon', 'core/ajax',\r\n    'core_course/actions', 'core_message/toggle_contact_button', 'theme_boost/popover', 'core/notification',],\r\n function($, Fragment, Templates, Loadingicon, Ajax, Actions, Contact, Notification) {\r\n\r\n    var SELECTOR = {\r\n        ACTIVITYLI: 'li.activity',\r\n        SECTIONLI: 'li.section',\r\n        ACTIVITYACTION: 'a.cm-edit-action',\r\n        SECTIONACTIONMENU: '.section_action_menu.designer-menu',\r\n    };\r\n\r\n    Y.use('moodle-course-coursebase', function() {\r\n        var courseformatselector = M.course.format.get_section_selector();\r\n        if (courseformatselector) {\r\n            SELECTOR.SECTIONLI = courseformatselector;\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Control designer format action\r\n     * @param {int} courseId\r\n     * @param {int} contextId\r\n     * @param {array} popupActivities\r\n     * @param {bool} videoTime\r\n     */\r\n    let DesignerSection = function(courseId, contextId, popupActivities, videoTime, issubpanel) {\r\n        var self = this;\r\n        self.courseId = courseId;\r\n        self.contextId = contextId;\r\n        self.popupActivities = popupActivities;\r\n        self.videoTime = videoTime;\r\n        self.isSubpanel = issubpanel;\r\n\r\n        $(\".course-info-block .carousel .carousel-item:nth-child(1)\").addClass('active');\r\n        $(\".course-info-block #courseStaffinfoControls.carousel\").addClass('active');\r\n\r\n        $('body').delegate(self.SectionController, 'click', self.sectionLayoutaction.bind(this));\r\n        $('body').delegate(self.SectionSubmenuSwitcher, 'click', self.sectionLayoutaction.bind(this));\r\n\r\n        $(\"body\").delegate(self.RestrictInfo, \"click\", self.moduleHandler.bind(this));\r\n        $(\"body\").delegate(self.sectionRestricted, \"click\", this.sectionRestrictHandler.bind(this));\r\n        $('body').delegate(self.fullDescription, \"click\", self.fullmodcontentHandler.bind(this));\r\n        $('body').delegate(self.trimDescription, \"click\", self.trimmodcontentHandler.bind(this));\r\n        $('body').delegate(self.goToURL, \"click\", self.redirectToModule.bind(this));\r\n        $('body').delegate(self.goToSectionURL, \"click\", self.redirectToSection.bind(this));\r\n        window.onhashchange = function() {\r\n            self.expandSection();\r\n        };\r\n        this.expandSection();\r\n\r\n        if ($('.course-type-flow').length > 0) {\r\n            $('.collapse').on('show.bs.collapse', function() {\r\n                $(this).parents('li.section').addClass('stack-header-collapsing');\r\n                var sectionid = $(this).parents('li.section').attr('id');\r\n                var section = document.getElementById(sectionid);\r\n                var distance = section.offsetTop - document.body.scrollTop;\r\n                setTimeout(() => window.scroll(0, distance), 50);\r\n            }).on('shown.bs.collapse', function() {\r\n                $(this).parents('li.section').removeClass('stack-header-collapsing');\r\n            });\r\n        }\r\n\r\n        var contactModal = document.getElementsByClassName('toggle-contact-button');\r\n        Array.from(contactModal).forEach(function(element) {\r\n            element.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                if (e.currentTarget.dataset.userid != undefined) {\r\n                    Contact.enhance(e.currentTarget);\r\n                }\r\n            });\r\n        });\r\n\r\n        $('.progress .progress-bar[data-toggle=\"popover\"]').popover();\r\n\r\n    };\r\n\r\n    /**\r\n     * Selector section controller.\r\n     */\r\n    DesignerSection.prototype.goToURL = '.designer [data-action=\"go-to-url\"]';\r\n\r\n    DesignerSection.prototype.goToSectionURL = '.designer [data-action=\"go-to-section-url\"]';\r\n\r\n    DesignerSection.prototype.SectionController = \".designer #section-designer-action .dropdown-menu a\";\r\n\r\n    DesignerSection.prototype.SectionSubmenuSwitcher = \".designer .section_action_menu .dropdown-subpanel a[data-value=section-designer-action] + .dropdown-menu a\"\r\n\r\n    DesignerSection.prototype.RestrictInfo = \".designer .designer-section-content .call-action-block\";\r\n\r\n    DesignerSection.prototype.moduleBlock = \".designer .designer-section-content li.activity\";\r\n\r\n    DesignerSection.prototype.loadingElement = \".icon-loader-block\";\r\n\r\n    DesignerSection.prototype.sectionRestricted = \".designer .availability-section-block .section-restricted-action\";\r\n\r\n    DesignerSection.prototype.fullDescription = \".designer-section-content li .fullcontent-summary .mod-description-action\";\r\n\r\n    DesignerSection.prototype.trimDescription = \".designer-section-content li .trim-summary .mod-description-action\";\r\n\r\n    DesignerSection.prototype.modules = null;\r\n\r\n    DesignerSection.prototype.redirectToModule = function(event) {\r\n        let nodeName = event.target.nodeName;\r\n        let preventionNodes = ['a', 'button', 'form'];\r\n        let iscircle = event.target.closest('li.activity').classList.contains('circle-layout');\r\n        let isDescription = event.target.classList.contains('mod-description-action');\r\n        let isPadlock = event.target.classList.contains('fa-lock');\r\n        let ispopupModule = event.target.closest('li.activity').classList.contains('popmodule');\r\n        let isModHasURL = event.target.closest('li.activity div[data-action=\"go-to-url\"]').getAttribute('data-url');\r\n        let isCompletionButton = event.target.closest('button[data-action=\"toggle-manual-completion\"]');\r\n        if ((nodeName in preventionNodes)\r\n            || document.body.classList.contains('editing') || iscircle || isDescription || isPadlock || ispopupModule\r\n            || isModHasURL == '' || isCompletionButton) {\r\n            if (ispopupModule && !document.body.classList.contains('editing')) {\r\n                if (event.target.closest(\"button[data-action='toggle-manual-completion']\") === null &&\r\n                    event.target.closest(\".mod-description-action\") === null) {\r\n                    var li = event.target.closest('li.activity');\r\n                    li.querySelector('a[href]').click();\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        var card = event.target.closest(\"[data-action=go-to-url]\");\r\n        let modurl = card.getAttribute('data-url');\r\n        window.location.href = modurl;\r\n        return true;\r\n    };\r\n\r\n    DesignerSection.prototype.redirectToSection = function(event) {\r\n        let isPadlock = event.target.classList.contains('fa-lock');\r\n        if (document.body.classList.contains('editing') || isPadlock) {\r\n            return null;\r\n        }\r\n        var singlesection = event.target.closest(\"[data-action=go-to-section-url]\");\r\n        let sectionurl = singlesection.getAttribute('data-url');\r\n        let sectiontarget =  \"_self\";\r\n        let target = singlesection.getAttribute('data-target');\r\n        if (target) {\r\n            sectiontarget = target;\r\n        }\r\n        window.open(sectionurl, sectiontarget);\r\n        return true;\r\n    };\r\n\r\n    DesignerSection.prototype.expandSection = () => {\r\n        var sectionID = window.location.hash;\r\n        if (sectionID) {\r\n            var id = sectionID.substring(1);\r\n            var section = document.getElementById(id);\r\n            if (section) {\r\n                var title = section.querySelector('.section-header-content');\r\n                if (title) {\r\n                    title.classList.remove('collapsed');\r\n                    title.setAttribute('aria-expanded', true);\r\n                }\r\n                var content = section.querySelector('.content');\r\n                if (content) {\r\n                    content.classList.add('show');\r\n                }\r\n                if (document.getElementById('section-course-accordion') !== null) {\r\n                    document.getElementById('section-head-0').classList.add('collapsed');\r\n                    document.getElementById('section-content-0').classList.remove('show');\r\n                }\r\n                section.scrollIntoView();\r\n            }\r\n        }\r\n    };\r\n\r\n    DesignerSection.prototype.fullmodcontentHandler = function(event) {\r\n        var THIS = $(event.currentTarget);\r\n        let fullContent = $(THIS).closest('li.activity').find('.fullcontent-summary');\r\n        let trimcontent = $(THIS).closest('li.activity').find('.trim-summary');\r\n        if (trimcontent.hasClass('summary-hide')) {\r\n            trimcontent.removeClass('summary-hide');\r\n            fullContent.addClass('summary-hide');\r\n        }\r\n    };\r\n\r\n    DesignerSection.prototype.trimmodcontentHandler = function(event) {\r\n        var THIS = $(event.currentTarget);\r\n        let fullContent = $(THIS).closest('li.activity').find('.fullcontent-summary');\r\n        let trimcontent = $(THIS).closest('li.activity').find('.trim-summary');\r\n        if (fullContent.hasClass('summary-hide')) {\r\n            fullContent.removeClass('summary-hide');\r\n            trimcontent.addClass('summary-hide');\r\n        }\r\n    };\r\n\r\n    DesignerSection.prototype.sectionRestrictHandler = function(event) {\r\n        var sectionRestrictInfo = $(event.currentTarget).prev();\r\n        if (sectionRestrictInfo) {\r\n            if (!sectionRestrictInfo.hasClass('show')) {\r\n                sectionRestrictInfo.addClass('show');\r\n            } else {\r\n                sectionRestrictInfo.removeClass('show');\r\n            }\r\n        }\r\n    };\r\n\r\n    DesignerSection.prototype.moduleHandler = function(event) {\r\n        event.preventDefault();\r\n        var restrictBlock = $(event.currentTarget).parents('.restrict-block');\r\n        if (restrictBlock.length) {\r\n            if (!restrictBlock.hasClass('show')) {\r\n                restrictBlock.addClass('show');\r\n            } else {\r\n                restrictBlock.removeClass('show');\r\n            }\r\n        }\r\n    };\r\n\r\n    DesignerSection.prototype.updateVideoTimeInstance = function(sectionId) {\r\n        var section = \"#\" + sectionId;\r\n        var sectionVideotimes = \"body \"+ section + \" .activity.videotime\";\r\n        if ($(sectionVideotimes).length == 0) {\r\n            return;\r\n        }\r\n        $(sectionVideotimes).each(function(index, module) {\r\n            this.CreateInstance(module);\r\n        }.bind(this));\r\n    };\r\n\r\n    DesignerSection.prototype.CreateInstance = function (module) {\r\n        if (\r\n            $(module).find('.instancename').length\r\n            && ($(module).find('.vimeo-embed').length\r\n            || $(module).find('.video-js').length)\r\n        ) {\r\n            var cmId = module.getAttribute(\"data-id\");\r\n            var args = {cmid : cmId};\r\n            // Get module instance.\r\n            var promises = Ajax.call([{\r\n                methodname: 'format_designer_get_videotime_instace',\r\n                args: args\r\n            }], true);\r\n            promises[0].then(function(data) {\r\n                var template = JSON.parse(data);\r\n                if (template.playertype == 'videojs') {\r\n                    var uniqueid =  $(module).find('.video-js').first().attr('id').replace('vimeo-embed-', '');\r\n                } else {\r\n                    var uniqueid =  $(module).find('.vimeo-embed').first().attr('id').replace('vimeo-embed-', '');\r\n                }\r\n                template.uniqueid = uniqueid;\r\n                Templates.render(template.templatename, template).then(function(html, js) {\r\n                    Templates.runTemplateJS(js);\r\n                    return true;\r\n                }).fail(Notification.exception);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Implementaion swith the section layout.\r\n     * @param {object} event\r\n     */\r\n    DesignerSection.prototype.sectionLayoutaction = function(event) {\r\n        event.preventDefault();\r\n        var self = this;\r\n        let sectionId = event.target.closest('li.section').getAttribute('id');\r\n        var sectionid = event.target.closest('li.section').getAttribute('data-id');\r\n        var sectionitem = document.getElementById(sectionId);\r\n        var iconBlock = \"#\" + sectionId + \" \" + self.loadingElement;\r\n        var layout = $(event.currentTarget).data('value');\r\n        var layouttext = $(event.currentTarget).text();\r\n        $(event.target).parents(\".dropdown\").find(\".btn\").html(layouttext);\r\n        $(event.target).parents(\".dropdown\").find(\".btn\").val(layout);\r\n        $(event.target).parent().find(\"a.dropdown-item\").each(function() {\r\n            $(this).removeClass('active');\r\n        });\r\n        $(event.target).addClass('active');\r\n        let dataid = event.target.closest('li.section').getAttribute('data-id');\r\n        var args = {\r\n            courseid: self.courseId,\r\n            sectionid: dataid,\r\n            options: [{name: $(event.currentTarget).data('option'), value: layout}]\r\n        };\r\n        var promises = Ajax.call([{\r\n                methodname: 'format_designer_set_section_options',\r\n                args: args\r\n            }], true);\r\n            $.when.apply($, promises)\r\n            .done(function() {\r\n                if (self.isSubpanel) {\r\n                    const promise = Fragment.loadFragment(\r\n                        'core_courseformat',\r\n                        'section',\r\n                        self.contextId,\r\n                        {\r\n                            id: sectionid,\r\n                            courseid: self.courseId,\r\n                        }\r\n                    );\r\n                    promise.then((html, js) => {\r\n                        Templates.replaceNode(sectionitem, html, js);\r\n                    }).catch();\r\n                } else {\r\n                    const sectionpromise = Actions.refreshSection('#' + sectionId, dataid, 0);\r\n                    sectionpromise.then(() => {\r\n                        return '';\r\n                    }).catch();\r\n                }\r\n            });\r\n        Loadingicon.addIconToContainerRemoveOnCompletion(iconBlock, promises);\r\n        // If videotime exist update the module.\r\n        setTimeout(function() {\r\n            if (self.videoTime) {\r\n                self.updateVideoTimeInstance(sectionId);\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    return {\r\n        init: function(courseId, contextId, popupActivities, videoTime, issubpanel) {\r\n            return new DesignerSection(courseId, contextId, popupActivities, videoTime, issubpanel);\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","Fragment","Templates","Loadingicon","Ajax","Actions","Contact","Notification","SELECTOR","ACTIVITYLI","SECTIONLI","ACTIVITYACTION","SECTIONACTIONMENU","Y","use","courseformatselector","M","course","format","get_section_selector","DesignerSection","courseId","contextId","popupActivities","videoTime","issubpanel","self","this","isSubpanel","addClass","delegate","SectionController","sectionLayoutaction","bind","SectionSubmenuSwitcher","RestrictInfo","moduleHandler","sectionRestricted","sectionRestrictHandler","fullDescription","fullmodcontentHandler","trimDescription","trimmodcontentHandler","goToURL","redirectToModule","goToSectionURL","redirectToSection","window","onhashchange","expandSection","length","on","parents","sectionid","attr","distance","document","getElementById","offsetTop","body","scrollTop","setTimeout","scroll","removeClass","contactModal","getElementsByClassName","Array","from","forEach","element","addEventListener","e","preventDefault","undefined","currentTarget","dataset","userid","enhance","popover","prototype","moduleBlock","loadingElement","modules","event","nodeName","target","iscircle","closest","classList","contains","isDescription","isPadlock","ispopupModule","isModHasURL","getAttribute","isCompletionButton","querySelector","click","modurl","location","href","singlesection","sectionurl","sectiontarget","open","sectionID","hash","id","substring","section","title","remove","setAttribute","content","add","scrollIntoView","THIS","fullContent","find","trimcontent","hasClass","sectionRestrictInfo","prev","restrictBlock","updateVideoTimeInstance","sectionId","sectionVideotimes","each","index","module","CreateInstance","args","cmid","call","methodname","then","data","template","JSON","parse","playertype","uniqueid","first","replace","render","templatename","html","js","runTemplateJS","fail","exception","sectionitem","iconBlock","layout","layouttext","text","val","parent","dataid","courseid","options","name","value","promises","when","apply","done","loadFragment","replaceNode","catch","refreshSection","addIconToContainerRemoveOnCompletion","init"],"mappings":"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"}